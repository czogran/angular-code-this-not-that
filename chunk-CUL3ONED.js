import{b as k,c as v}from"./chunk-2WW22MLQ.js";import"./chunk-VZSSPM6Z.js";import{a as C,b as g,c as u,f as h,g as y}from"./chunk-4TPATSYR.js";import"./chunk-6K3Y7BDI.js";import"./chunk-EYALUUED.js";import{Hb as c,Oa as l,S as p,Wb as o,X as f,Yb as m,bb as d,wb as t,xb as n}from"./chunk-WWHZWTZN.js";import"./chunk-2NFLSA4Y.js";var s=class r{leakyRefs=[];cleanRefs=[];storeLeaky(a){this.leakyRefs.push(a),console.log("\u274C Leaky:"),this.leakyRefs.forEach(e=>console.log(`  - ${e.name}`))}storeClean(a){this.cleanRefs.push(a),console.log("\u2713 Clean:"),this.cleanRefs.forEach(e=>console.log(`  - ${e.name}`))}clearClean(){console.log("\u2713 Cleared:"),this.cleanRefs.forEach(a=>console.log(`  - ${a.name}`)),this.cleanRefs=[]}getLeakyCount(){return this.leakyRefs.length}getCleanCount(){return this.cleanRefs.length}static \u0275fac=function(e){return new(e||r)};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})};var x=class r{name=`ComponentRefsComponent#${Math.floor(Math.random()*1e4)}`;refService=f(s);leakyRef(){this.refService.storeLeaky(this)}properRef(){this.refService.storeClean(this)}ngOnDestroy(){console.log("\u{1F5D1}\uFE0F ComponentRefsComponent destroyed"),this.refService.clearClean()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=d({type:r,selectors:[["app-component-refs-section"]],decls:21,vars:2,consts:[[1,"example-section"],["mat-raised-button","",3,"click"],[1,"log"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,i){e&1&&(t(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),o(3,"Component References in Services"),n()(),t(4,"mat-card-content")(5,"p"),o(6," Services that hold component references prevent garbage collection, causing memory leaks. Open DevTools console to see the logs. "),n(),t(7,"div",0)(8,"h3"),o(9,"\u274C Memory Leak Example"),n(),t(10,"button",1),c("click",function(){return i.leakyRef()}),o(11,"Store Ref (Leaky)"),n(),t(12,"div",2),o(13),n()(),t(14,"div",0)(15,"h3"),o(16,"\u2713 Correct Example"),n(),t(17,"button",3),c("click",function(){return i.properRef()}),o(18," Store Ref (Cleaned) "),n(),t(19,"div",2),o(20),n()()()()),e&2&&(l(13),m("Leaky refs in service: ",i.refService.getLeakyCount()),l(7),m("Clean refs in service: ",i.refService.getCleanCount()))},dependencies:[y,C,u,h,g,v,k],styles:[".example-section[_ngcontent-%COMP%]{margin:16px 0;padding:12px;background-color:#f9f9f9;border-radius:4px}.example-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600}.example-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:8px}.log[_ngcontent-%COMP%]{margin:8px 0 0;padding:8px;background-color:#fff;border-left:3px solid #2196f3;font-family:monospace;font-size:12px;color:#333}"],changeDetection:0})};export{x as ComponentRefsComponent};
