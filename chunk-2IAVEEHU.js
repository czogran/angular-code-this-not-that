import{a as K,b as L}from"./chunk-6L23CKLQ.js";import"./chunk-3U6IX45G.js";import{a as q,b as z,c as A}from"./chunk-2WW22MLQ.js";import"./chunk-VZSSPM6Z.js";import{a as V,b as U,c as R,f as H,g as j}from"./chunk-4TPATSYR.js";import"./chunk-6K3Y7BDI.js";import{j as N}from"./chunk-EYALUUED.js";import{Ab as B,Fb as k,Hb as l,Ib as s,Oa as d,Ub as F,Wb as a,Xb as m,Yb as u,aa as x,ba as g,bb as h,gb as O,jc as $,ma as _,oa as I,pb as C,qb as P,rb as w,sb as E,tb as v,ub as M,vb as f,wb as n,xb as o,yb as b,zb as D}from"./chunk-WWHZWTZN.js";import{a as y,b as T}from"./chunk-2NFLSA4Y.js";var S=class r{price=$.required();isUpdated=_(!1);previousPrice;constructor(){I(()=>{let t=this.price();this.previousPrice!==void 0&&this.previousPrice!==t&&(this.isUpdated.set(!0),setTimeout(()=>{this.isUpdated.set(!1)},1500)),this.previousPrice=t})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-price-cell"]],inputs:{price:[1,"price"]},decls:2,vars:3,consts:[[1,"price"]],template:function(e,i){e&1&&(D(0,"span",0),a(1),B()),e&2&&(F("value-updated",i.isUpdated()),d(),u("$",i.price()))},styles:["@keyframes _ngcontent-%COMP%_flashOrange{0%{background-color:#ffe0b2}to{background-color:transparent}}.price[_ngcontent-%COMP%]{transition:background-color .3s}.value-updated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flashOrange 1.5s ease}"],changeDetection:0})};var X=(r,t)=>t.id;function Y(r,t){if(r&1){let e=k();n(0,"div",6)(1,"span",8),a(2),o(),n(3,"span",9),a(4),o(),b(5,"app-price-cell",10),n(6,"button",11),l("click",function(){let c=x(e).$implicit,p=s(2);return g(p.removeProductById(c.id))}),n(7,"mat-icon"),a(8,"delete"),o()()()}if(r&2){let e=t.$implicit;d(2),u("ID: ",e.id),d(2),m(e.name),d(),f("price",e.price)}}function Z(r,t){if(r&1&&O(0,Y,9,3,"div",7),r&2){let e=s();f("ngForOf",e.products())}}function ee(r,t){if(r&1){let e=k();n(0,"div",6)(1,"span",8),a(2),o(),n(3,"span",9),a(4),o(),b(5,"app-price-cell",10),n(6,"button",11),l("click",function(){let c=x(e).$implicit,p=s(2);return g(p.removeProductById(c.id))}),n(7,"mat-icon"),a(8,"delete"),o()()()}if(r&2){let e=t.$implicit;d(2),u("ID: ",e.id),d(2),m(e.name),d(),f("price",e.price)}}function te(r,t){if(r&1&&v(0,ee,9,3,"div",6,X),r&2){let e=s();M(e.products())}}function ne(r,t){if(r&1){let e=k();n(0,"div",6)(1,"span",8),a(2),o(),n(3,"span",9),a(4),o(),b(5,"app-price-cell",10),n(6,"button",11),l("click",function(){let c=x(e).$implicit,p=s(2);return g(p.removeProductById(c.id))}),n(7,"mat-icon"),a(8,"delete"),o()()()}if(r&2){let e=t.$implicit;d(2),u("ID: ",e.id),d(2),m(e.name),d(),f("price",e.price)}}function ie(r,t){if(r&1&&v(0,ne,9,3,"div",6,w),r&2){let e=s();M(e.products())}}function re(r,t){if(r&1){let e=k();n(0,"div",6)(1,"span",8),a(2),o(),n(3,"span",9),a(4),o(),b(5,"app-price-cell",10),n(6,"button",11),l("click",function(){let c=x(e).$implicit,p=s(2);return g(p.removeProductById(c.id))}),n(7,"mat-icon"),a(8,"delete"),o()()()}if(r&2){let e=t.$implicit;d(2),u("ID: ",e.id),d(2),m(e.name),d(),f("price",e.price)}}function oe(r,t){if(r&1&&v(0,re,9,3,"div",6,E),r&2){let e=s();M(e.products())}}var W=class r{baseProducts=[{id:1,name:"Laptop",price:999},{id:2,name:"Mouse",price:29},{id:3,name:"Keyboard",price:79}];nextId=4;products=_([...this.baseProducts]);expandedSections=_({ngfor:!0,id:!0,index:!0,reference:!0});updatedProductIds=_(new Set);toggleSection(t){this.expandedSections.update(e=>T(y({},e),{[t]:!e[t]}))}addProduct(){let t=["Monitor","Webcam","Headset","Mousepad","Speaker","USB Hub"],e=t[Math.floor(Math.random()*t.length)],i={id:this.nextId++,name:`${e} ${this.nextId-1}`,price:Math.floor(Math.random()*500)+50};this.products.update(c=>[...c,i])}removeProduct(){this.products.update(t=>t.slice(0,-1))}removeProductById(t){this.products.update(e=>e.filter(i=>i.id!==t))}refreshProducts(){let t=this.products().map(e=>y({},e));this.products.set(t)}updatePrice(){let t=Math.floor(Math.random()*this.products().length),e=Math.floor(Math.random()*1e3)+50,i=this.products()[t]?.id;this.products.update(c=>c.map((p,G)=>G===t?T(y({},p),{price:e}):p)),i!==void 0&&(this.updatedProductIds.update(c=>new Set(c).add(i)),setTimeout(()=>{this.updatedProductIds.update(c=>{let p=new Set(c);return p.delete(i),p})},1500))}trackByProductId(t,e){return e.id}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-trackby-patterns"]],decls:42,vars:8,consts:[[1,"button-group"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"example-section"],[1,"section-header",3,"click"],[1,"product-item"],["class","product-item",4,"ngFor","ngForOf"],[1,"id"],[1,"name"],[3,"price"],["mat-icon-button","","color","warn",3,"click"]],template:function(e,i){e&1&&(n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a(3,"TrackBy Patterns"),o()(),n(4,"mat-card-content")(5,"div",0)(6,"button",1),l("click",function(){return i.addProduct()}),a(7,"Add Product"),o(),n(8,"button",2),l("click",function(){return i.removeProduct()}),a(9,"Remove Product"),o(),n(10,"button",3),l("click",function(){return i.refreshProducts()}),a(11," Refresh Products "),o(),n(12,"button",3),l("click",function(){return i.updatePrice()}),a(13,"Update Price"),o()(),n(14,"div",4)(15,"h3",5),l("click",function(){return i.toggleSection("ngfor")}),n(16,"span"),a(17,"*ngFor without trackBy (re-renders all items)"),o(),n(18,"mat-icon"),a(19),o()(),C(20,Z,1,1,"div",6),o(),n(21,"div",4)(22,"h3",5),l("click",function(){return i.toggleSection("id")}),n(23,"span"),a(24,"@for with track by id (recommended)"),o(),n(25,"mat-icon"),a(26),o()(),C(27,te,2,0),o(),n(28,"div",4)(29,"h3",5),l("click",function(){return i.toggleSection("index")}),n(30,"span"),a(31,"@for with track by $index"),o(),n(32,"mat-icon"),a(33),o()(),C(34,ie,2,0),o(),n(35,"div",4)(36,"h3",5),l("click",function(){return i.toggleSection("reference")}),n(37,"span"),a(38,"@for with track by reference"),o(),n(39,"mat-icon"),a(40),o()(),C(41,oe,2,0),o()()()),e&2&&(d(19),m(i.expandedSections().ngfor?"expand_less":"expand_more"),d(),P(i.expandedSections().ngfor?20:-1),d(6),m(i.expandedSections().id?"expand_less":"expand_more"),d(),P(i.expandedSections().id?27:-1),d(6),m(i.expandedSections().index?"expand_less":"expand_more"),d(),P(i.expandedSections().index?34:-1),d(6),m(i.expandedSections().reference?"expand_less":"expand_more"),d(),P(i.expandedSections().reference?41:-1))},dependencies:[j,V,R,H,U,A,z,q,L,K,N,S],styles:[".button-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px}.example-section[_ngcontent-%COMP%]{margin:16px 0}.example-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin:0 0 8px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;padding:8px;border-radius:4px;transition:background-color .2s}.example-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.example-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.example-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}.example-section[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:8px 12px;margin:4px 0;background-color:#fff;border-radius:4px;animation:_ngcontent-%COMP%_flashRed 1.5s ease;align-items:center}.example-section[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{min-width:50px}.example-section[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}.example-section[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.6;transition:opacity .2s}.example-section[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_flashRed{0%{background-color:#ffcdd2}to{background-color:#fff}}"],changeDetection:0})};export{W as TrackbyPatternsComponent};
