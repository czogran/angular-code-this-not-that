import{b as S,c as y}from"./chunk-2WW22MLQ.js";import"./chunk-VZSSPM6Z.js";import{a as p,b as f,c as h,f as C,g as d}from"./chunk-4TPATSYR.js";import"./chunk-6K3Y7BDI.js";import"./chunk-EYALUUED.js";import{Hb as i,I as a,O as m,Wb as n,bb as b,u as c,wb as e,xb as t}from"./chunk-WWHZWTZN.js";import"./chunk-2NFLSA4Y.js";var R=class l{subTrue=null;subFalse=null;source$=c(1e3).pipe(m(o=>console.log("Source Emitting",o)));sourceWithRefCount$=this.source$.pipe(a({bufferSize:1,refCount:!0}));sourceWithoutRefCount$=this.source$.pipe(a({bufferSize:1,refCount:!1}));startRefCountTrue(){this.subTrue||(console.log("Subscribing to RefCount: TRUE"),this.subTrue=this.sourceWithRefCount$.subscribe(o=>console.log("[RefCount: TRUE] Subscriber received",o)))}stopRefCountTrue(){this.subTrue&&(console.log("Unsubscribing from RefCount: TRUE"),this.subTrue.unsubscribe(),this.subTrue=null)}startRefCountFalse(){this.subFalse||(console.log("Subscribing to RefCount: FALSE"),this.subFalse=this.sourceWithoutRefCount$.subscribe(o=>console.log("[RefCount: FALSE] Subscriber received",o)))}stopRefCountFalse(){this.subFalse&&(console.log("Unsubscribing from RefCount: FALSE"),this.subFalse.unsubscribe(),this.subFalse=null,console.log("Check console: Source should still be emitting for RefCount: FALSE"))}ngOnDestroy(){this.subTrue?.unsubscribe(),this.subFalse?.unsubscribe()}static \u0275fac=function(s){return new(s||l)};static \u0275cmp=b({type:l,selectors:[["app-share-replay-memory-leaks"]],decls:27,vars:0,consts:[[1,"example-section"],[1,"button-group"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(s,r){s&1&&(e(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),n(3,"Memory Leak Example - shareReplay with refCount"),t()(),e(4,"mat-card-content")(5,"p"),n(6," Check console for subscription logs. This demonstrates shareReplay without refCount causing memory leaks. "),t(),e(7,"div",0)(8,"h3"),n(9,"With refCount: true"),t(),e(10,"p"),n(11,"Source stops when no subscribers."),t(),e(12,"div",1)(13,"button",2),i("click",function(){return r.startRefCountTrue()}),n(14," Subscribe "),t(),e(15,"button",3),i("click",function(){return r.stopRefCountTrue()}),n(16,"Unsubscribe"),t()()(),e(17,"div",0)(18,"h3"),n(19,"With refCount: false (Leak)"),t(),e(20,"p"),n(21,"Source KEEPS running even after unsubscribe!"),t(),e(22,"div",1)(23,"button",2),i("click",function(){return r.startRefCountFalse()}),n(24," Subscribe "),t(),e(25,"button",3),i("click",function(){return r.stopRefCountFalse()}),n(26," Unsubscribe "),t()()()()())},dependencies:[d,p,h,C,f,y,S],encapsulation:2,changeDetection:0})};export{R as ShareReplayMemoryLeaksComponent};
